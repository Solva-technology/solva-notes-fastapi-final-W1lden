{% extends "base.html" %}

{% block title %}Редактирование{% endblock %}

{% block content %}
  <div class="panel">
    <div class="h1">Редактирование</div>
    <form method="post" action="/notes/{{ note.id }}/edit" class="form">
      <div class="field">
        <label>Заголовок</label>
        <input class="input" type="text" name="title" value="{{ note.title }}" required>
      </div>
      <div class="field">
        <label>Текст</label>
        <textarea class="textarea" name="text" rows="10">{{ note.text }}</textarea>
      </div>
      <div class="field">
        <label>Категории</label>
        {% if categories and categories|length %}
          <select class="select" name="category_ids" multiple size="6">
            {% for c in categories %}
              <option value="{{ c.id }}" {% if c.id in selected_ids %}selected{% endif %}>{{ c.name }}</option>
            {% endfor %}
          </select>
          <div class="muted" style="font-size:12px">Зажмите Ctrl/⌘ для выбора нескольких</div>
        {% else %}
          <div class="empty">
            Категорий пока нет. Вы можете отредактировать заметку позже и добавить категории.
            <a href="/admin" target="_blank">Открыть админку</a>
          </div>
        {% endif %}
      </div>
      <div class="actions">
        <a href="/notes/{{ note.id }}" class="btn ghost">Отмена</a>
        <button type="submit" class="btn">Сохранить</button>
      </div>
    </form>
  </div>
{% endblock %}
